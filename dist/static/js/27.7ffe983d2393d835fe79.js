webpackJsonp([27],{"17Gm":function(e,t,s){(e.exports=s("FZ+f")(!1)).push([e.i,"\n.sel-amout-cont {\n  position: relative;\n  width: 100%;\n  height: auto;\n}\n.el-amout-search {\n  width: 100%;\n  position: absolute;\n  top: 38px;\n  left: 0px;\n  max-height: 300px;\n  overflow-y: auto;\n  z-index: 5000;\n  border: 1px solid #dcdee5;\n  background-color: #fff;\n}\n",""])},"3IYm":function(e,t,s){(e.exports=s("FZ+f")(!1)).push([e.i,"",""])},Qbfb:function(e,t,s){var a=s("3IYm");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s("rjj0")("b55baeb8",a,!0)},g7CG:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("U1Lu"),n=s("BO1k"),o=s.n(n),r=s("//Fk"),l=s.n(r),i={model:{prop:"storeIds",event:"changeVal"},props:["sId","storeIds"],data:function(){return{defaultProps:{label:"companyName",value:"storeCode",children:"children",disabled:function(e,t){return 0===e.enableStatus}},state3:"",idStr:"",divState:!1,resultArr:[],showTree:!1,selectObjArr:[]}},mounted:function(){var e=this;window.document.body.onmousedown=function(t){e.outhand()},this.selectExperienceStoreTree().then(function(t){e.getMenuName(t),e.$refs.treeObj.setCheckedNodes(e.selectObjArr)})},methods:{selectExperienceStoreTree:function(){var e=this;return new l.a(function(t,s){Object(a.e)({id:e.sId}).then(function(s){e.resultArr=s,t(s)})})},lockin:function(){this.divState=!0},lockout:function(){this.divState=!1},inhand:function(){this.showTree=!0},outhand:function(){this.divState?this.showTree=!0:this.showTree=!1},getMenuName:function(e){var t=!0,s=!1,a=void 0;try{for(var n,r=o()(e);!(t=(n=r.next()).done);t=!0){var l=n.value;0!==l.selectStatus&&this.selectObjArr.push(l),l.children&&this.getMenuName(l.children)}}catch(e){s=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(s)throw a}}},handleCheck:function(){var e=[],t=[];this.$refs.treeObj.getCheckedNodes().forEach(function(s){s.storeCode&&(e.push(s.storeCode),t.push(s.companyName))}),this.state3=t.toString(),this.idStr=e.toString(),this.changeVal()},changeVal:function(){this.$emit("changeVal",this.idStr)}},watch:{state3:function(e){e||(this.$refs.treeObj.setCheckedKeys([]),this.idStr="",this.changeVal())},storeIds:function(e){console.log(e)}}},c={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sel-amout-cont",on:{mouseover:e.lockin,mouseout:e.lockout}},[s("el-input",{attrs:{clearable:""},on:{focus:e.inhand},model:{value:e.state3,callback:function(t){e.state3=t},expression:"state3"}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showTree,expression:"showTree"}],staticClass:"el-amout-search"},[s("el-tree",{ref:"treeObj",attrs:{data:e.resultArr,"show-checkbox":"","node-key":"companyId",props:e.defaultProps,"default-expand-all":!0},on:{"check-change":e.handleCheck}})],1)],1)},staticRenderFns:[]};var u={props:["storeObj"],data:function(){return{formTestX:{id:"",name:"",type:"",status:"",code:"",storeIds:""},restaurants:[],sId:"",ftxRule:{name:[{required:!0,message:"请输入内容"}],storeIds:[{required:!0,message:"请输入内容"}],type:[{required:!0,message:"请选择结算对象类型",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},dlist:[],formTestdd:{start:1,pageSize:10},paginationdd:{total:0,sizes:[100,50,20,10]}}},components:{selectAmout:s("VU/8")(i,c,!1,function(e){s("y44d")},null,null).exports},mounted:function(){this.storeObj&&this.selectSettlementObjectInfo(),this.selectSettlementObjectByName()},methods:{selectSettlementObjectInfo:function(){var e=this;Object(a.h)({id:this.storeObj.id}).then(function(t){e.paginationdd.total=t.detailList.total,e.dlist=t.detailList.list,e.formTestX={id:e.storeObj.id,name:t.settlementObject.name,code:t.settlementObject.code,type:t.settlementObject.type,status:t.settlementObject.status,storeIds:t.settlementObject.storeIds}})},selectSettlementObjectByName:function(){var e=this;Object(a.g)().then(function(t){var s=[];t.forEach(function(e){var t={value:e.experienceName,address:e.experienceCode};s.push(t)}),e.restaurants=s})},querySearchAsyncX:function(e,t){var s=this.restaurants,a=e?s.filter(this.createStateFilterX(e)):s;clearTimeout(this.timeout),this.timeout=setTimeout(function(){t(a)},1e3*Math.random())},createStateFilterX:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},handleSelectX:function(e){this.formTestX.name=e.value,this.formTestX.code=e.address},handleIconClickX:function(){this.formTestX.name=""},submitAdd:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;Object(a.a)(t.formTestX).then(function(e){t.storeObj?t.$message({message:"保存成功",type:"success"}):t.$message({message:"创建成功",type:"success"}),t.$emit("refreshFun")})})},cancelAdd:function(){this.$emit("closeFun")},handleCurrentChangedd:function(){},handleSizeChangedd:function(){}}},d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-form",{ref:"ftxRule",attrs:{model:e.formTestX,"label-width":"130px",rules:e.ftxRule}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"结算对象：",prop:"name"}},[s("el-col",{attrs:{span:14}},[e.storeObj?s("el-autocomplete",{attrs:{disabled:"","fetch-suggestions":e.querySearchAsyncX,placeholder:"请输入内容"},on:{select:e.handleSelectX},model:{value:e.formTestX.name,callback:function(t){e.$set(e.formTestX,"name",t)},expression:"formTestX.name"}},[e.formTestX.name?s("i",{staticClass:"el-icon-circle-close el-input__icon",attrs:{slot:"suffix"},on:{click:e.handleIconClickX},slot:"suffix"}):e._e()]):s("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsyncX,placeholder:"请输入内容"},on:{select:e.handleSelectX},model:{value:e.formTestX.name,callback:function(t){e.$set(e.formTestX,"name",t)},expression:"formTestX.name"}},[e.formTestX.name?s("i",{staticClass:"el-icon-circle-close el-input__icon",attrs:{slot:"suffix"},on:{click:e.handleIconClickX},slot:"suffix"}):e._e()])],1),e._v(" "),s("el-col",{attrs:{span:8}},[e.formTestX.name?s("el-input",{attrs:{disabled:""},model:{value:e.formTestX.code,callback:function(t){e.$set(e.formTestX,"code",t)},expression:"formTestX.code"}}):e._e()],1)],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"关联体验店：",prop:"storeIds"}},[s("select-amout",{attrs:{"s-id":e.storeObj.id},model:{value:e.formTestX.storeIds,callback:function(t){e.$set(e.formTestX,"storeIds",t)},expression:"formTestX.storeIds"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"结算对象类型：",prop:"type"}},[s("el-radio-group",{model:{value:e.formTestX.type,callback:function(t){e.$set(e.formTestX,"type",t)},expression:"formTestX.type"}},[s("el-radio",{attrs:{label:1}},[e._v("体验店")]),e._v(" "),s("el-radio",{attrs:{label:2}},[e._v("体验中心")]),e._v(" "),s("el-radio",{attrs:{label:3}},[e._v("加盟服务中心")])],1)],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"状态：",prop:"status"}},[s("el-radio-group",{model:{value:e.formTestX.status,callback:function(t){e.$set(e.formTestX,"status",t)},expression:"formTestX.status"}},[s("el-radio",{attrs:{label:1}},[e._v("有效")]),e._v(" "),s("el-radio",{attrs:{label:0}},[e._v("无效")])],1)],1)],1)],1)],1),e._v(" "),e.storeObj?e._e():s("div",{staticStyle:{"margin-top":"30px"},attrs:{align:"center"}},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitAdd("ftxRule")}}},[e._v("提交")]),e._v(" "),s("el-button",{staticStyle:{"margin-left":"30px"},on:{click:e.cancelAdd}},[e._v("取消")])],1),e._v(" "),e.storeObj?s("div",{attrs:{align:"left"}},[s("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:function(t){e.submitAdd("ftxRule")}}},[e._v("保存")])],1):e._e(),e._v(" "),e.storeObj?[e._m(0),e._v(" "),s("div",{staticStyle:{"margin-top":"10px"}},[s("el-row",{attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:6}},[s("span",[e._v("总累计佣金："+e._s(e.storeObj.totalCommission))])]),e._v(" "),s("el-col",{attrs:{span:6}},[s("span",[e._v("已结算佣金："+e._s(e.storeObj.hasPayCommission))])]),e._v(" "),s("el-col",{attrs:{span:6}},[s("span",[e._v("结算中佣金："+e._s(e.storeObj.noPayCommission))])])],1),e._v(" "),s("el-row",{staticStyle:{"margin-top":"10px"}},[s("el-table",{attrs:{data:e.dlist,border:""}},[s("el-table-column",{attrs:{label:"体验店名称",prop:"experienceName"}}),e._v(" "),s("el-table-column",{attrs:{label:"累计佣金",prop:"totalCommission"}}),e._v(" "),s("el-table-column",{attrs:{label:"已结算佣金",prop:"hasPayCommission"}}),e._v(" "),s("el-table-column",{attrs:{label:"结算中佣金",prop:"noPayCommission"}})],1),e._v(" "),s("div",{staticClass:"block",attrs:{align:"center"}},[s("el-pagination",{attrs:{"current-page":e.formTestdd.start,"page-sizes":e.paginationdd.sizes,"page-size":e.formTestdd.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.paginationdd.total},on:{"size-change":e.handleSizeChangedd,"current-change":e.handleCurrentChangedd}})],1)],1)],1)]:e._e()],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"base-title",staticStyle:{"margin-top":"30px"}},[t("span",{staticClass:"s1"},[this._v("佣金信息")]),this._v(" "),t("span",{staticClass:"s2"}),this._v(" "),t("div",{staticStyle:{clear:"both"}})])}]};var m=s("VU/8")(u,d,!1,function(e){s("Qbfb")},null,null);t.default=m.exports},y44d:function(e,t,s){var a=s("17Gm");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s("rjj0")("4e0088db",a,!0)}});