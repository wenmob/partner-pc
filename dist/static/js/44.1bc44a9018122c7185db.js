webpackJsonp([44],{"3R42":function(e,n,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},Dy5H:function(e,n,a){var t=a("3R42");"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);a("rjj0")("33bef8ca",t,!0)},QdiQ:function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=a("Wj15"),i={props:["dataRow"],data:function(){return{diagForm:{carNo:"",carType:"",maintainPeriod:"",maintainTime:this.time(new Date,"YYYY-MM-DD"),maintainMileage:"0.00",partsFee:"0.00",timeFee:"0.00",feeTotal:"0.00",itemCode:""},projects:[],rules:{itemCode:[{required:!0,message:"请选择维护项目",trigger:"blur"}],timeFee:[{required:!0,message:"请输入工时费",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],partsFee:[{required:!0,message:"请输入配件费",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],maintainMileage:[{required:!0,message:"请输入实际维护里程",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],maintainTime:[{required:!0,message:"请输入保养日期",trigger:"blur"}]},operatorName:""}},mounted:function(){this.getMaintainItemList(),this.initMaintainInfo()},computed:{summation:{set:function(){this.diagForm.feeTotal=1*this.diagForm.partsFee+1*this.diagForm.timeFee},get:function(){return this.diagForm.feeTotal=1*this.diagForm.partsFee+1*this.diagForm.timeFee,0==this.diagForm.feeTotal?this.diagForm.feeTotal="0.00":this.diagForm.feeTotal=(1*this.diagForm.feeTotal).toFixed(2),this.diagForm.feeTotal}}},methods:{closeThen:function(){this.$emit("closeDialog")},getMaintainItemList:function(){var e=this;Object(t.d)().then(function(n){e.projects=n}).catch(function(e){console.log(e)})},initMaintainInfo:function(){var e=this;Object(t.i)({carNo:this.dataRow.carNo}).then(function(n){e.operatorName=n.operateName}).catch(function(e){console.log(e)})},addVehicleMaintainRecord:function(e){var n=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;n.diagForm.carNo=n.dataRow.carNo,n.diagForm.carType=n.dataRow.carType,n.diagForm.maintainPeriod=n.dataRow.lastMaintainPeriod,n.diagForm.maintainMileage=(1*n.diagForm.maintainMileage).toFixed(2),n.diagForm.partsFee=(1*n.diagForm.partsFee).toFixed(2),n.diagForm.timeFee=(1*n.diagForm.timeFee).toFixed(2),n.diagForm.feeTotal=(1*n.diagForm.feeTotal).toFixed(2),Object(t.a)(n.diagForm).then(function(e){n.$emit("refeClose")}).catch(function(e){console.log(e)})})},fixedFun:function(e,n){"maintainMileage"===n?(this.diagForm.maintainMileage=(1*parseFloat(e)).toFixed(2),isNaN(this.diagForm.maintainMileage)&&(this.diagForm.maintainMileage="0.00")):"partsFee"===n?(this.diagForm.partsFee=(1*parseFloat(e)).toFixed(2),isNaN(this.diagForm.partsFee)&&(this.diagForm.partsFee="0.00")):"timeFee"===n&&(this.diagForm.timeFee=(1*parseFloat(e)).toFixed(2),isNaN(this.diagForm.timeFee)&&(this.diagForm.timeFee="0.00"))}}},o={render:function(){var e=this,n=e.$createElement,a=e._self._c||n;return a("div",[a("el-form",{ref:"diagForm",attrs:{model:e.diagForm,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"保养车辆"}},[a("el-input",{attrs:{disabled:"",placeholder:"保养车辆"},model:{value:e.dataRow.carNo,callback:function(n){e.$set(e.dataRow,"carNo",n)},expression:"dataRow.carNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"车辆类型"}},[a("el-input",{attrs:{disabled:"",placeholder:"车辆类型"},model:{value:e.dataRow.carTypeName,callback:function(n){e.$set(e.dataRow,"carTypeName",n)},expression:"dataRow.carTypeName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"保期"}},[a("el-input",{attrs:{disabled:"",placeholder:"保期"},model:{value:e.dataRow.lastMaintainPeriodName,callback:function(n){e.$set(e.dataRow,"lastMaintainPeriodName",n)},expression:"dataRow.lastMaintainPeriodName"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"保养日期",prop:"maintainTime"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"保养日期"},model:{value:e.diagForm.maintainTime,callback:function(n){e.$set(e.diagForm,"maintainTime",n)},expression:"diagForm.maintainTime"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{label:"实际维护里程(KM)","label-width":"150px",prop:"maintainMileage"}},[a("el-input",{attrs:{placeholder:"",onkeyup:"value=value.replace(/[^\\d{1,}\\.\\d{1,}|\\d{1,}]/g,'')"},on:{blur:function(n){e.fixedFun(e.diagForm.maintainMileage,"maintainMileage")}},model:{value:e.diagForm.maintainMileage,callback:function(n){e.$set(e.diagForm,"maintainMileage",n)},expression:"diagForm.maintainMileage"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"配件费用",prop:"partsFee"}},[a("el-input",{attrs:{placeholder:"",onkeyup:"value=value.replace(/[^\\d{1,}\\.\\d{1,}|\\d{1,}]/g,'')"},on:{blur:function(n){e.fixedFun(e.diagForm.partsFee,"partsFee")}},model:{value:e.diagForm.partsFee,callback:function(n){e.$set(e.diagForm,"partsFee",n)},expression:"diagForm.partsFee"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"工时费用",prop:"timeFee"}},[a("el-input",{attrs:{placeholder:"",onkeyup:"value=value.replace(/[^\\d{1,}\\.\\d{1,}|\\d{1,}]/g,'')"},on:{blur:function(n){e.fixedFun(e.diagForm.timeFee,"timeFee")}},model:{value:e.diagForm.timeFee,callback:function(n){e.$set(e.diagForm,"timeFee",n)},expression:"diagForm.timeFee"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"费用合计"}},[a("el-input",{attrs:{disabled:"",placeholder:""},model:{value:e.summation,callback:function(n){e.summation=n},expression:"summation"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"维护项目",prop:"itemCode"}},[a("el-select",{attrs:{placeholder:"维护项目",clearable:""},model:{value:e.diagForm.itemCode,callback:function(n){e.$set(e.diagForm,"itemCode",n)},expression:"diagForm.itemCode"}},e._l(e.projects,function(e){return a("el-option",{key:e.id,attrs:{label:e.cnName,value:e.code}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{label:"办理人"}},[a("el-input",{attrs:{disabled:"",placeholder:"办理人"},model:{value:e.operatorName,callback:function(n){e.operatorName=n},expression:"operatorName"}})],1)],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"40px"}},[a("div",{attrs:{align:"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(n){e.addVehicleMaintainRecord("diagForm")}}},[e._v("提交")]),e._v(" "),a("el-button",{on:{click:e.closeThen}},[e._v("取消")])],1)])],1)],1)},staticRenderFns:[]};var r=a("VU/8")(i,o,!1,function(e){a("Dy5H")},null,null);n.default=r.exports}});