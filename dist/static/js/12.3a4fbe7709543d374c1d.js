webpackJsonp([12],{Gb6O:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=t("uXZL"),o=t.n(i),s=t("t4zo"),a=t.n(s),l=t("U1Lu"),r={data:function(){return{formTest:{start:1,pageSize:10,objectName:"",sn:"",state:"",time:""},selectedOptions:[],timeValue:[],list:[],pagination:{total:0,sizes:[100,50,20,10]},dialogIndex:-1,dialogVisible:!1,dialogObj:{title:"",width:"600px"},orderDetails:""}},components:{"comm-details":function(){return t.e(23).then(t.bind(null,"uRD7"))},"review-info":function(){return t.e(24).then(t.bind(null,"gsy1"))}},mounted:function(){this.firstGetCommissionSettlementOrder()},methods:{firstGetCommissionSettlementOrder:function(){var n=this;this.partner.permission.authority.HHR_COMMISSION_AUDIT.includes("HHR_ORDER_AUDIT_COPY")?this.formTest.state="0":this.partner.permission.authority.HHR_COMMISSION_AUDIT.includes("HHR_INVOICE_AUDIT_COPY")?this.formTest.state="1":this.partner.permission.authority.HHR_COMMISSION_AUDIT.includes("HHR_FINANCIAL_PAYMENT_COPY")&&(this.formTest.state="2"),Object(l.b)(this.formTest).then(function(e){n.pagination.total=e.total,n.list=e.list})},getCommissionSettlementOrder:function(){var n=this;Object(l.b)(this.formTest).then(function(e){n.pagination.total=e.total,n.list=e.list})},changeCompany:function(n){this.formTest.sn=n[n.length-1]},handleSizeChange:function(n){this.formTest.pageSize=n,this.getCommissionSettlementOrder()},handleCurrentChange:function(n){this.formTest.start=n,this.getCommissionSettlementOrder()},seeFun:function(n){this.dialogObj.title="详情",this.dialogObj.width="1000px",this.orderDetails=n,this.dialogIndex=0,this.dialogVisible=!0},reviewFun:function(n){this.dialogObj.title="订单审核",this.dialogObj.width="1000px",this.orderDetails=n,this.dialogIndex=1,this.dialogVisible=!0},submit:function(){this.formTest.start=1,this.getCommissionSettlementOrder()},dialogClose:function(){this.dialogIndex=-1,this.dialogVisible=!1},refreshFun:function(){this.dialogIndex=-1,this.dialogVisible=!1,this.getCommissionSettlementOrder()},closeFun:function(){this.dialogIndex=-1,this.dialogVisible=!1},exportData:function(n){var e=this,t={bookType:"xlsx",bookSST:!1,type:"binary",defaultCellStyle:{font:{name:"Verdana",sz:11,color:"FF00FF88"},fill:{fgColor:{rgb:"FFFFAA00"}}},showGridLines:!1},i={SheetNames:["Sheet1"],Sheets:{},Props:{}},s=[],r={start:1,pageSize:5e3,id:n.id};Object(l.c)(r).then(function(l){var r=l.list,c=[];if(r.length>0){var m=1;r.forEach(function(n){var t={"序号":m,"订单编号":n.orderNo,"结算对象":n.commissionSettlementObjectName,"结算对象类型":n.commissionSettlementObjectType,"体验店名称":n.experienceName,"所属公司":n.experienceParentName,"客户姓名":n.custemerName,"合伙人是否有上线":n.hasSuperior,"电话号码":n.custemerPhoneNo,"车型":n.carModel,"车牌号":n.carNo,"承租时间":e.time(n.leaseTime),"租赁类型":n.leaseType,"租赁产品":n.strName,"租金":n.rent,"佣金":n.commission};c.push(t),m++})}s=c,i.Sheets.Sheet1=o.a.utils.json_to_sheet(s);var u=new Blob([e.s2ab(o.a.write(i,t))],{type:"application/octet-stream"});a.a.saveAs(u,n.name+"-佣金结算单明细.xlsx")})}}},c={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"app-container"},[t("el-form",{attrs:{model:n.formTest,inline:!0}},[t("el-form-item",{attrs:{label:"结算对象"}},[t("el-input",{attrs:{placeholder:"结算对象名字",clearable:""},model:{value:n.formTest.objectName,callback:function(e){n.$set(n.formTest,"objectName",e)},expression:"formTest.objectName"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"选择公司"}},[t("el-cascader",{attrs:{options:n.company.arr,filterable:"","show-all-levels":!1,clearable:"","change-on-select":""},on:{change:n.changeCompany},model:{value:n.selectedOptions,callback:function(e){n.selectedOptions=e},expression:"selectedOptions"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"选择订单状态"}},[t("el-select",{attrs:{placeholder:"选择订单状态",clearable:""},model:{value:n.formTest.state,callback:function(e){n.$set(n.formTest,"state",e)},expression:"formTest.state"}},[t("el-option",{attrs:{label:"订单待审核",value:"0"}}),n._v(" "),t("el-option",{attrs:{label:"发票待审核",value:"1"}}),n._v(" "),t("el-option",{attrs:{label:"待支付",value:"2"}}),n._v(" "),t("el-option",{attrs:{label:"已完成",value:"3"}})],1)],1),n._v(" "),t("el-form-item",{attrs:{label:"选择时间"}},[t("el-date-picker",{attrs:{type:"month",align:"right","value-format":"yyyy-MM"},model:{value:n.formTest.time,callback:function(e){n.$set(n.formTest,"time",e)},expression:"formTest.time"}})],1),n._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:n.submit}},[n._v("查询")])],1),n._v(" "),t("el-table",{attrs:{data:n.list,border:""}},[t("el-table-column",{attrs:{label:"佣金结算单编号",prop:"commissionSettlementSerialNum",width:"180"}}),n._v(" "),t("el-table-column",{attrs:{label:"结算对象",prop:"name"}}),n._v(" "),t("el-table-column",{attrs:{label:"结算对象类型",prop:"typeName"}}),n._v(" "),t("el-table-column",{attrs:{label:"所属公司",prop:"companyName"}}),n._v(" "),t("el-table-column",{attrs:{label:"佣金金额",prop:"commission"}}),n._v(" "),t("el-table-column",{attrs:{label:"订单数量",prop:"orderNum"}}),n._v(" "),t("el-table-column",{attrs:{label:"订单状态",prop:"state"},scopedSlots:n._u([{key:"default",fn:function(e){return[0==e.row.state?t("span",[n._v("订单待审核")]):1==e.row.state?t("span",[n._v("发票待审核")]):2==e.row.state?t("span",[n._v("待支付")]):3==e.row.state?t("span",[n._v("已完成")]):n._e()]}}])}),n._v(" "),t("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){n.seeFun(e.row)}}},[n._v("查看")]),n._v(" "),n.partner.permission.authority.HHR_COMMISSION_AUDIT.includes("HHR_ORDER_AUDIT_COPY")?[0==e.row.state?t("el-button",{staticStyle:{color:"#6440F2"},attrs:{type:"text"},on:{click:function(t){n.reviewFun(e.row)}}},[n._v("订单审核")]):n._e()]:n._e(),n._v(" "),n.partner.permission.authority.HHR_COMMISSION_AUDIT.includes("HHR_INVOICE_AUDIT_COPY")?[1==e.row.state?t("el-button",{staticStyle:{color:"#DBA54F"},attrs:{type:"text"},on:{click:function(t){n.reviewFun(e.row)}}},[n._v("发票审核")]):n._e()]:n._e(),n._v(" "),n.partner.permission.authority.HHR_COMMISSION_AUDIT.includes("HHR_FINANCIAL_PAYMENT_COPY")?[2==e.row.state?t("el-button",{staticStyle:{color:"#5CCD42"},attrs:{type:"text"},on:{click:function(t){n.reviewFun(e.row)}}},[n._v("支付确认")]):n._e()]:n._e(),n._v(" "),n.partner.permission.authority.HHR_COMMISSION_AUDIT.includes("HHR_SETTLEMENT_EXPORT_COPY")?[t("el-button",{staticStyle:{color:"#A4A814"},attrs:{type:"text"},on:{click:function(t){n.exportData(e.row)}}},[n._v("导出")])]:n._e()]}}])})],1)],1),n._v(" "),t("div",{staticClass:"block",attrs:{align:"center"}},[t("el-pagination",{attrs:{"current-page":n.formTest.start,"page-sizes":n.pagination.sizes,"page-size":n.formTest.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:n.pagination.total},on:{"size-change":n.handleSizeChange,"current-change":n.handleCurrentChange}})],1),n._v(" "),t("el-dialog",{attrs:{title:n.dialogObj.title,visible:n.dialogVisible,width:n.dialogObj.width},on:{"update:visible":function(e){n.dialogVisible=e},close:n.dialogClose}},[0==n.dialogIndex?t("comm-details",{attrs:{"order-details":n.orderDetails}}):1==n.dialogIndex?t("review-info",{attrs:{"order-details":n.orderDetails},on:{refreshFun:n.refreshFun,closeFun:n.closeFun}}):n._e()],1)],1)},staticRenderFns:[]};var m=t("VU/8")(r,c,!1,function(n){t("mT/i")},null,null);e.default=m.exports},"mT/i":function(n,e,t){var i=t("wGBw");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);t("rjj0")("709e85b0",i,!0)},wGBw:function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])}});