webpackJsonp([32],{"6B7v":function(e,t,n){"use strict";t.d=function(e){return Object(o.a)({url:"/bonusExchangeSetting/getCoupons",method:"post",data:e})},t.a=function(e){return Object(o.a)({url:"bonusExchangeSetting/batchInsertBonusExchangeSetting",method:"post",data:e})},t.b=function(e){return Object(o.a)({url:"/bonusExchangeSetting/getBonusExchangeSetting",method:"post",data:e})},t.e=function(e){return Object(o.a)({url:"/bonusExchangeSetting/updateBonusExchangeSetting",method:"post",data:e})},t.c=function(e){return Object(o.a)({url:"/bonusExchangeSetting/getCouponsById",method:"post",data:e})};var o=n("vLgD")},Fk1G:function(e,t,n){var o=n("RIYP");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n("rjj0")("23c8e582",o,!0)},RIYP:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"\n.portsn {\n    color: #7589AF; \n    cursor: pointer;\n}\n",""])},qDfY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("6B7v"),s={data:function(){return{formTest:{start:1,pageSize:10,company:"",type:"1",couponsType:"",couponsIsEnable:"",exchangeIsEnable:"",keyName:""},selectedOptions:[],pagination:{total:0,sizes:[100,50,20,10]},list:[],dialogObj:{title:"",width:"500px"},dialogVisible:!1,dialogIndex:-1,rId:""}},components:{"coupon-desc":function(){return n.e(25).then(n.bind(null,"SuKo"))},"in-exchange":function(){return n.e(28).then(n.bind(null,"1wEK"))}},mounted:function(){this.getBonusExchangeSetting()},methods:{openDialog:function(e){switch(e){case 1:this.dialogIndex=1,this.dialogObj.title="导入兑换",this.dialogObj.width="1100px",this.dialogVisible=!0}},openDialog1:function(e){this.rId=e.relateId,this.dialogIndex=0,this.dialogObj.title="优惠券详情",this.dialogObj.width="440px",this.dialogVisible=!0},dialogClose:function(){this.dialogVisible=!1,this.dialogIndex=-1},getBonusExchangeSetting:function(){var e=this;Object(o.b)(this.formTest).then(function(t){e.pagination.total=t.total,e.list=t.list,t.list.length>0&&e.list.forEach(function(e){e.noUse=!0}),console.log(t)})},handleSizeChange:function(e){this.formTest.pageSize=e,this.getBonusExchangeSetting()},handleCurrentChange:function(e){this.formTest.start=e,this.getBonusExchangeSetting()},changeCompany:function(e){this.formTest.company=e[e.length-1]},submit:function(){this.formTest.start=1,this.getBonusExchangeSetting()},editRow:function(e){var t=this.list.findIndex(function(t){return t.id===e.id});e.noUse=!1,this.$set(this.list,t,e)},affirmRow:function(e){var t=this,n={id:e.id,bonusConsumeAmount:e.bonusConsumeAmount,isEnabled:e.isEnabled};Object(o.e)(n).then(function(n){var o=t.list.findIndex(function(t){return t.id===e.id});e.noUse=!0,t.$set(t.list,o,e)})},loseFun:function(e){var t=this,n={id:e.id,bonusConsumeAmount:e.bonusConsumeAmount,isEnabled:0};Object(o.e)(n).then(function(n){var o=t.list.findIndex(function(t){return t.id===e.id});e.isEnabled=0,t.$set(t.list,o,e)})},startFun:function(e){var t=this,n={id:e.id,bonusConsumeAmount:e.bonusConsumeAmount,isEnabled:1};Object(o.e)(n).then(function(n){var o=t.list.findIndex(function(t){return t.id===e.id});e.isEnabled=1,t.$set(t.list,o,e)})},refreshList:function(){this.dialogVisible=!1,this.dialogIndex=-1,this.formTest.start=1,this.getBonusExchangeSetting()}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{attrs:{model:e.formTest,inline:!0,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"选择公司"}},[n("el-cascader",{attrs:{options:e.company.arr,filterable:"","show-all-levels":!1,clearable:"","change-on-select":""},on:{change:e.changeCompany},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"优惠券类型"}},[n("el-select",{attrs:{placeholder:"优惠券类型",clearable:""},model:{value:e.formTest.couponsType,callback:function(t){e.$set(e.formTest,"couponsType",t)},expression:"formTest.couponsType"}},[n("el-option",{attrs:{label:"满减",value:"mj"}}),e._v(" "),n("el-option",{attrs:{label:"折扣",value:"zk"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"优惠券是否启用"}},[n("el-select",{attrs:{placeholder:"优惠券是否启用",clearable:""},model:{value:e.formTest.couponsIsEnable,callback:function(t){e.$set(e.formTest,"couponsIsEnable",t)},expression:"formTest.couponsIsEnable"}},[n("el-option",{attrs:{label:"否",value:"0"}}),e._v(" "),n("el-option",{attrs:{label:"是",value:"1"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"兑换是否启用"}},[n("el-select",{attrs:{placeholder:"兑换是否启用",clearable:""},model:{value:e.formTest.exchangeIsEnable,callback:function(t){e.$set(e.formTest,"exchangeIsEnable",t)},expression:"formTest.exchangeIsEnable"}},[n("el-option",{attrs:{label:"否",value:"0"}}),e._v(" "),n("el-option",{attrs:{label:"是",value:"1"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"关键词"}},[n("el-input",{attrs:{placeholder:"关键词",clearable:""},model:{value:e.formTest.keyName,callback:function(t){e.$set(e.formTest,"keyName",t)},expression:"formTest.keyName"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("查询")])],1)],1),e._v(" "),n("div",{staticClass:"xlsx-box"},[n("el-button",{attrs:{type:"success"},on:{click:function(t){e.openDialog(1)}}},[e._v("导入兑换")])],1),e._v(" "),n("el-table",{staticStyle:{"margin-top":"20px"},attrs:{data:e.list,border:""}},[n("el-table-column",{attrs:{label:"优惠券名称",width:"150",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"portsn",staticStyle:{color:"#558FF2",cursor:"pointer"},on:{click:function(n){e.openDialog1(t.row)}}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"类型",prop:"couponsType"},scopedSlots:e._u([{key:"default",fn:function(t){return["mj"==t.row.couponsType?n("span",[e._v("满减")]):"zk"==t.row.couponsType?n("span",[e._v("折扣")]):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"面值",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return["mj"==t.row.couponsType?n("span",[e._v("满"+e._s(t.row.fullAmount)+"减"+e._s(t.row.minusAmount))]):"zk"==t.row.couponsType?n("span",[e._v(e._s(10*t.row.discount)+"折，最高抵扣"+e._s(t.row.discountLimit)+"元")]):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"有效期",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.validStartTime?n("span",[e._v(e._s(e._f("timeStr")(t.row.validStartTime))+" "+e._s(t.row.useStartTime)+" 至 "+e._s(e._f("timeStr")(t.row.validEndTime))+" "+e._s(t.row.useEndTime))]):n("span")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"所属公司",width:"150",prop:"company"}}),e._v(" "),n("el-table-column",{attrs:{label:"优惠券是否启用",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.couponsIsEnabled?n("span",[e._v("是")]):n("span",[e._v("否")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"兑换是否启用",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.isEnabled?n("span",[e._v("是")]):0==t.row.isEnabled?n("span",[e._v("否")]):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"消耗金币",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticStyle:{width:"200px"}},[n("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"",disabled:t.row.noUse},model:{value:t.row.bonusConsumeAmount,callback:function(n){e.$set(t.row,"bonusConsumeAmount",n)},expression:"scope.row.bonusConsumeAmount"}}),e._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:t.row.noUse,expression:"scope.row.noUse"}],staticClass:"el-icon-edit",staticStyle:{"font-size":"16px",color:"black",cursor:"pointer"},on:{click:function(n){e.editRow(t.row)}}}),e._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:!t.row.noUse,expression:"!scope.row.noUse"}],staticClass:"el-icon-success",staticStyle:{"font-size":"16px",color:"green",cursor:"pointer"},on:{click:function(n){e.affirmRow(t.row)}}})],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.isEnabled?n("el-button",{on:{click:function(n){e.loseFun(t.row)}}},[e._v("停用")]):n("el-button",{attrs:{type:"success"},on:{click:function(n){e.startFun(t.row)}}},[e._v("启用")])]}}])})],1),e._v(" "),n("div",{staticClass:"block",attrs:{align:"center"}},[n("el-pagination",{attrs:{"current-page":e.formTest.start,"page-sizes":e.pagination.sizes,"page-size":e.formTest.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),n("el-dialog",{attrs:{title:e.dialogObj.title,width:e.dialogObj.width,visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.dialogClose}},[0==e.dialogIndex?n("coupon-desc",{attrs:{"relate-id":e.rId}}):1==e.dialogIndex?n("in-exchange",{on:{refreshList:e.refreshList}}):e._e()],1)],1)},staticRenderFns:[]};var a=n("VU/8")(s,i,!1,function(e){n("Fk1G")},null,null);t.default=a.exports}});