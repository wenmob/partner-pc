webpackJsonp([28],{"1wEK":function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=t("mvHQ"),o=t.n(l),a=t("6B7v"),i={data:function(){return{InExchange:{start:1,pageSize:10,companySn:"",type:"",isEnable:"",keyName:""},InExchangeList:[],multipleSelection:[],paginationE:{total:0,sizes:[100,50,20,10]},selectedOptions1:[],dialogObjch:{title:"",width:"500px"},dialogVisiblech:!1,dialogIndexch:-1,rIdch:""}},components:{"coupon-desc":function(){return t.e(25).then(t.bind(null,"SuKo"))}},mounted:function(){this.getFiveCoupons()},methods:{getFiveCoupons:function(){var n=this;Object(a.d)(this.InExchange).then(function(e){n.paginationE.total=e.total,n.InExchangeList=e.list,e.list.length>0&&n.InExchangeList.forEach(function(n){n.bonusConsumeAmount=""})})},handleSelectionChange:function(n){this.multipleSelection=n},handleSizeChangeE:function(n){this.InExchange.pageSize=n,this.getFiveCoupons()},handleCurrentChangeE:function(n){this.InExchange.start=n,this.getFiveCoupons()},getTags:function(n){0==n.bonusConsumeAmount||""==n.bonusConsumeAmount?this.$refs.multipleTable.toggleRowSelection(n,!1):1==n.isEnable?this.$refs.multipleTable.toggleRowSelection(n,!0):this.$refs.multipleTable.toggleRowSelection(n,!1)},insertCoupon:function(){for(var n=this,e=[],t=0;t<this.multipleSelection.length;t++){if(""==this.multipleSelection[t].bonusConsumeAmount||0==this.multipleSelection[t].bonusConsumeAmount)return this.$message({message:"提交的消耗金额必须是大于0",type:"warning"}),!1;var l={relateId:this.multipleSelection[t].id,bonusConsumeAmount:this.multipleSelection[t].bonusConsumeAmount,name:this.multipleSelection[t].name};e.push(l)}if(e.length<=0)return this.$message({message:"提交的数据不能为空",type:"warning"}),!1;Object(a.a)({bonusExchangeSettingListVO:o()(e)}).then(function(e){n.$emit("refreshList")})},changeCompany1:function(n){this.InExchange.companySn=n[n.length-1]},submitEx:function(){this.InExchange.start=1,this.getFiveCoupons()},SeleFun:function(n,e){return 1==n.isEnable},openDialogch:function(n){this.rIdch=n.id,this.dialogIndexch=0,this.dialogObjch.title="优惠券详情",this.dialogObjch.width="440px",this.dialogVisiblech=!0},dialogClosech:function(){this.dialogVisiblech=!1,this.dialogIndexch=-1}}},s={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",[t("el-form",{attrs:{model:n.InExchange,inline:!0,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"选择公司"}},[t("el-cascader",{attrs:{options:n.company.arr,filterable:"","show-all-levels":!1,clearable:"","change-on-select":""},on:{change:n.changeCompany1},model:{value:n.selectedOptions1,callback:function(e){n.selectedOptions1=e},expression:"selectedOptions1"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"选择类别"}},[t("el-select",{attrs:{placeholder:"选择类别",clearable:""},model:{value:n.InExchange.type,callback:function(e){n.$set(n.InExchange,"type",e)},expression:"InExchange.type"}},[t("el-option",{attrs:{label:"满减",value:"mj"}}),n._v(" "),t("el-option",{attrs:{label:"折扣",value:"zk"}})],1)],1),n._v(" "),t("el-form-item",{attrs:{label:"优惠券是否启用"}},[t("el-select",{attrs:{placeholder:"优惠券是否启用",clearable:""},model:{value:n.InExchange.isEnable,callback:function(e){n.$set(n.InExchange,"isEnable",e)},expression:"InExchange.isEnable"}},[t("el-option",{attrs:{label:"是",value:"1"}}),n._v(" "),t("el-option",{attrs:{label:"否",value:"0"}})],1)],1),n._v(" "),t("el-form-item",{attrs:{label:"关键词"}},[t("el-input",{attrs:{placeholder:"关键词",clearable:""},model:{value:n.InExchange.keyName,callback:function(e){n.$set(n.InExchange,"keyName",e)},expression:"InExchange.keyName"}})],1),n._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:n.submitEx}},[n._v("查询")])],1)],1),n._v(" "),t("div",{staticClass:"xlsx-box"},[t("el-button",{attrs:{type:"success"},on:{click:n.insertCoupon}},[n._v("提交")])],1),n._v(" "),t("el-table",{ref:"multipleTable",staticStyle:{"margin-top":"20px"},attrs:{data:n.InExchangeList,border:"","tooltip-effect":"dark"},on:{"selection-change":n.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",selectable:n.SeleFun,width:"55"}}),n._v(" "),t("el-table-column",{attrs:{label:"优惠券名称",prop:"name"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("span",{staticClass:"portsn",staticStyle:{color:"#558FF2",cursor:"pointer"},on:{click:function(t){n.openDialogch(e.row)}}},[n._v(n._s(e.row.name))])]}}])}),n._v(" "),t("el-table-column",{attrs:{label:"类别",prop:"type"}}),n._v(" "),t("el-table-column",{attrs:{label:"面值",prop:""},scopedSlots:n._u([{key:"default",fn:function(e){return["满减"==e.row.type?t("span",[n._v("满"+n._s(e.row.fullAmount)+"减"+n._s(e.row.minusAmount))]):"折扣"==e.row.type?t("span",[n._v(n._s(10*e.row.discount)+"折，-"+n._s(e.row.discountLimit))]):n._e()]}}])}),n._v(" "),t("el-table-column",{attrs:{label:"所属公司"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("span",[n._v(n._s(n.getCompanyName(e.row.companySn)))])]}}])}),n._v(" "),t("el-table-column",{attrs:{label:"有效期",width:"240"},scopedSlots:n._u([{key:"default",fn:function(e){return[e.row.validStartTime?t("span",[n._v(n._s(n._f("timeStr")(e.row.validStartTime))+" "+n._s(e.row.useStartTime)+" 至 "+n._s(n._f("timeStr")(e.row.validEndTime))+" "+n._s(e.row.useEndTime))]):t("span")]}}])}),n._v(" "),t("el-table-column",{attrs:{label:"是否启用",prop:"isEnable"},scopedSlots:n._u([{key:"default",fn:function(e){return[1==e.row.isEnable?t("span",[n._v("是")]):t("span",[n._v("否")])]}}])}),n._v(" "),t("el-table-column",{attrs:{label:"消耗金币"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("el-input",{attrs:{placeholder:"请输入金额",onkeyup:"value=value.replace(/[^\\d{1,}\\.\\d{1,}|\\d{1,}]/g,'')"},on:{blur:function(t){n.getTags(e.row)}},model:{value:e.row.bonusConsumeAmount,callback:function(t){n.$set(e.row,"bonusConsumeAmount",t)},expression:"scope.row.bonusConsumeAmount"}})]}}])})],1),n._v(" "),t("div",{staticClass:"block",attrs:{align:"center"}},[t("el-pagination",{attrs:{"current-page":n.InExchange.start,"page-sizes":n.paginationE.sizes,"page-size":n.InExchange.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:n.paginationE.total},on:{"size-change":n.handleSizeChangeE,"current-change":n.handleCurrentChangeE}})],1),n._v(" "),t("el-dialog",{attrs:{title:n.dialogObjch.title,width:n.dialogObjch.width,visible:n.dialogVisiblech,modal:!1},on:{"update:visible":function(e){n.dialogVisiblech=e},close:n.dialogClosech}},[0==n.dialogIndexch?t("coupon-desc",{attrs:{"relate-id":n.rIdch}}):n._e()],1)],1)},staticRenderFns:[]};var c=t("VU/8")(i,s,!1,function(n){t("OttW")},null,null);e.default=c.exports},OttW:function(n,e,t){var l=t("ToRh");"string"==typeof l&&(l=[[n.i,l,""]]),l.locals&&(n.exports=l.locals);t("rjj0")("148ced51",l,!0)},ToRh:function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},mvHQ:function(n,e,t){n.exports={default:t("qkKv"),__esModule:!0}},qkKv:function(n,e,t){var l=t("FeBl"),o=l.JSON||(l.JSON={stringify:JSON.stringify});n.exports=function(n){return o.stringify.apply(o,arguments)}}});